{"visual":{"name":"valueDisplayer","displayName":"Value Displayer","guid":"valueDisplayerAA1089073DAF4BAF951DD0E63B3BB01F","visualClassName":"Visual","version":"1.0.0","description":"","supportUrl":"https://github.com/KristofferBerge/pbiviz-value-displayer/issues","gitHubUrl":"https://github.com/KristofferBerge/pbiviz-value-displayer"},"apiVersion":"1.8.0","author":{"name":"Kristoffer MÃ¸gster Berge","email":"kristoffer.berge@gmail.com"},"assets":{"icon":"assets/icon.png"},"externalJS":["node_modules/powerbi-visuals-utils-dataviewutils/lib/index.js"],"style":"style/visual.less","capabilities":{"dataRoles":[{"displayName":"Category Data","name":"category","kind":"Grouping"},{"displayName":"Measure Data","name":"measure","kind":"Measure"}],"supportsHighlight":true,"objects":{"dataPoint":{"displayName":"Data colors","properties":{"defaultColor":{"displayName":"Default color","type":{"fill":{"solid":{"color":true}}}},"showAllDataPoints":{"displayName":"Show all","type":{"bool":true}},"fill":{"displayName":"Fill","type":{"fill":{"solid":{"color":true}}}},"fillRule":{"displayName":"Color saturation","type":{"fill":{}}},"fontSize":{"displayName":"Text Size","type":{"formatting":{"fontSize":true}}},"valueReduceStrategy":{"displayName":"Reduce Strategy","type":{"enumeration":[{"displayName":"First","value":"First"},{"displayName":"Last","value":"Last"},{"displayName":"Average","value":"Average"},{"displayName":"Sum","value":"Sum"}]}}}}},"dataViewMappings":[{"categorical":{"categories":{"for":{"in":"category"},"dataReductionAlgorithm":{"top":{"count":100000}}},"values":{"select":[{"bind":{"to":"measure"}}]}}}]},"stringResources":{},"content":{"js":"var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e,t,r){void 0===e&&(e=[]);var n=e;return i(n),t&&(n.identityFields=t),r&&(n.source=r),n}function i(e,t){e.grouped=t?function(){return t}:function(){return r(e)}}function r(e){for(var t,i=[],r=0,n=e.length;n>r;r++){var a=e[r];if(!t||t.identity!==a.identity){if(t={values:[]},a.identity){t.identity=a.identity;var o=a.source;void 0!==o.groupName?t.name=o.groupName:o.displayName&&(t.name=o.displayName)}i.push(t)}t.values.push(a)}return i}e.createValueColumns=t,e.setGrouped=i,e.groupValues=r}(t=e.DataViewTransform||(e.DataViewTransform={}))}(t=e.dataview||(e.dataview={}))}(t=e.utils||(e.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e,t){if(!e||!e.length)return-1;var i=e[0];if(i.values&&i.values.length>0)for(var n=0,a=i.values.length;a>n;++n){var o=i.values[n];if(o&&o.source&&r(o.source,t))return n}return-1}function i(e,t){if(e&&e.length)for(var i=0,n=e.length;n>i;i++)if(r(e[i].source,t))return i;return-1}function r(e,t){var i=e.roles;return i&&i[t]}function n(e,t){return null!=e&&null!=e.metadata&&e.metadata.columns&&e.metadata.columns.some(function(e){return e.roles&&void 0!==e.roles[t]})}function a(e,t){return e&&e.source&&e.source.roles&&e.source.roles[t]===!0}e.getMeasureIndexOfRole=t,e.getCategoryIndexOfRole=i,e.hasRole=r,e.hasRoleInDataView=n,e.hasRoleInValueColumn=a}(t=e.DataRoleHelper||(e.DataRoleHelper={}))}(t=e.dataview||(e.dataview={}))}(t=e.utils||(e.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e,t,i){if(!e)return i;var r=e[t];return void 0===r?i:r}function i(e,i,r){var n=t(e,i);return n&&n.solid?n.solid.color:r}e.getValue=t,e.getFillColorByPropertyName=i}(t=e.DataViewObject||(e.DataViewObject={}))}(t=e.dataview||(e.dataview={}))}(t=e.utils||(e.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t;!function(t){function i(t,i,r){return t?e.DataViewObject.getValue(t[i.objectName],i.propertyName,r):r}function r(e,t,i){return e&&e[t]?e[t]:i}function n(e,t,r){var n=i(e,t);return n&&n.solid?n.solid.color:r}function a(e,t,r){var n=i(e,t,r);return n&&n.solid?n.solid.color:void 0===n||null===n||\"object\"==typeof n&&!n.solid?r:n}t.getValue=i,t.getObject=r,t.getFillColor=n,t.getCommonValue=a}(t=e.DataViewObjects||(e.DataViewObjects={}))}(t=e.dataview||(e.dataview={}))}(t=e.utils||(e.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){var i,r=e.extensibility.utils.dataview.DataRoleHelper;!function(e){function t(e,t,i){if(e.categories&&e.categories.length>0){var n=e.categories[0];return n.source&&r.hasRole(n.source,t)&&r.hasRole(n.source,i)}return!1}function i(e){return void 0!==e.groupName?e.groupName:e.queryName}function n(e){var t=o(e);return null!=t&&t.imageUrl===!0}function a(e){var t=o(e);return null!=t&&t.webUrl===!0}function o(e){return e&&e.type&&e.type.misc}function u(e){return e&&e.metadata&&e.metadata.columns&&e.metadata.columns.length?e.metadata.columns.some(function(e){return n(e)===!0}):!1}e.categoryIsAlsoSeriesRole=t,e.getSeriesName=i,e.isImageUrlColumn=n,e.isWebUrlColumn=a,e.getMiscellaneousTypeDescriptor=o,e.hasImageUrlColumn=u}(i=t.converterHelper||(t.converterHelper={}))}(i=t.dataview||(t.dataview={}))}(i=t.utils||(t.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(){function t(){}return t.getDefault=function(){return new this},t.createPropertyIdentifier=function(e,t){return{objectName:e,propertyName:t}},t.parse=function(t){var i,r=this.getDefault();if(!t||!t.metadata||!t.metadata.objects)return r;i=r.getProperties();for(var n in i)for(var a in i[n]){var o=r[n][a];r[n][a]=e.DataViewObjects.getCommonValue(t.metadata.objects,i[n][a],o)}return r},t.isPropertyEnumerable=function(e){return!t.InnumerablePropertyPrefix.test(e)},t.enumerateObjectInstances=function(e,t){var i=e&&e[t.objectName];if(!i)return[];var r={objectName:t.objectName,selector:null,properties:{}};for(var n in i)i.hasOwnProperty(n)&&(r.properties[n]=i[n]);return{instances:[r]}},t.prototype.getProperties=function(){var e=this,i={},r=Object.keys(this);return r.forEach(function(r){if(t.isPropertyEnumerable(r)){var n=Object.keys(e[r]);i[r]={},n.forEach(function(e){t.isPropertyEnumerable(r)&&(i[r][e]=t.createPropertyIdentifier(r,e))})}}),i},t}();t.InnumerablePropertyPrefix=/^_/,e.DataViewObjectsParser=t}(t=e.dataview||(e.dataview={}))}(t=e.utils||(e.utils={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},powerbi;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){\"use strict\";var i=e.extensibility.utils.dataview.DataViewObjectsParser,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dataPoint=new n,t}return __extends(t,e),t}(i);t.VisualSettings=r;var n=function(){function e(){this.defaultColor=\"\",this.showAllDataPoints=!0,this.fill=\"\",this.fillRule=\"\",this.fontSize=12,this.valueReduceStrategy=\"\"}return e}();t.dataPointSettings=n}(i=t.valueDisplayerAA1089073DAF4BAF951DD0E63B3BB01F||(t.valueDisplayerAA1089073DAF4BAF951DD0E63B3BB01F={}))}(i=t.visual||(t.visual={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){\"use strict\";var t=function(){function t(e){this.target=e.element}return t.prototype.update=function(e){this.settings=t.parseSettings(e&&e.dataViews&&e.dataViews[0]);var i,r,n=this.getValuesToDisplay(e);if(1==n.length)i=n[0];else{var a=n.reduce(function(e,t){return e+t});switch(this.settings.dataPoint.valueReduceStrategy){case\"Average\":i=Math.floor(a/n.length),r=\"Average\";break;case\"Sum\":i=a,r=\"Sum\";break;case\"First\":i=n[0],r=\"First\";break;case\"Last\":i=n[n.length-1],r=\"Last\"}}this.render(i,r)},t.prototype.render=function(e,t){this.target.innerHTML=\"\";var i=document.createElement(\"div\"),r=document.createElement(\"h1\");if(r.setAttribute(\"class\",\"valueElement\"),r.innerHTML=e.toString(),i.appendChild(r),this.target.appendChild(i),t){var n=document.createElement(\"div\");n.innerHTML=t,n.setAttribute(\"class\",\"explanationElement\"),i.appendChild(n)}},t.parseSettings=function(t){return e.VisualSettings.parse(t)},t.prototype.getValuesToDisplay=function(e){var t=e.dataViews[0].categorical.values,i=t[0].highlights;return i?i.filter(function(e){return null!=e}):t[0].values},t.prototype.enumerateObjectInstances=function(t){return e.VisualSettings.enumerateObjectInstances(this.settings||e.VisualSettings.getDefault(),t)},t}();e.Visual=t}(t=e.valueDisplayerAA1089073DAF4BAF951DD0E63B3BB01F||(e.valueDisplayerAA1089073DAF4BAF951DD0E63B3BB01F={}))}(t=e.visual||(e.visual={}))}(t=e.extensibility||(e.extensibility={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.valueDisplayerAA1089073DAF4BAF951DD0E63B3BB01F={name:\"valueDisplayerAA1089073DAF4BAF951DD0E63B3BB01F\",displayName:\"Value Displayer\",\"class\":\"Visual\",version:\"1.0.0\",apiVersion:\"1.8.0\",create:function(t){return new e.extensibility.visual.valueDisplayerAA1089073DAF4BAF951DD0E63B3BB01F.Visual(t)},custom:!0}}(i=t.plugins||(t.plugins={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));","css":".visual-valueDisplayerAA1089073DAF4BAF951DD0E63B3BB01F .valueElement{text-align:center}.visual-valueDisplayerAA1089073DAF4BAF951DD0E63B3BB01F .explanationElement{text-align:center}","iconBase64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2RpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpBOEJGMzkxN0NBRDNFMDExQTcxQ0JFODI3ODBCQUE5RSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3NEY1QjA1NUQ0OTAxMUUwQTgxREI2NjMxMkNEMUNEMyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3NEY1QjA1NEQ0OTAxMUUwQTgxREI2NjMxMkNEMUNEMyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5Mjk5RDU1ODBGRDRFMDExQTcxQ0JFODI3ODBCQUE5RSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpBOEJGMzkxN0NBRDNFMDExQTcxQ0JFODI3ODBCQUE5RSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpDoNX0AAAI3SURBVHjarJRLSFVRFIY9t7SiRDGLoEEPCRJRaCSYkxCiFCXCF+LIMExQLkilgumgwkbdBuWDRC2EomhURCOjgagkXEgKLUKhidobM6H0+i34rxyPnuvEA5/rXPda/1l7739vJxKJxG3ls93+hEKhTILxJhgMftmsiPxdhHw4CfepeR8dCyjWwwB0kZy3iVgCoQ2ewnmXxhrBD7Cgr/ZQVA17fDRPw2UYhzK6G99IsBse6/0QNME+H8FT4EA/YiPqOgA1q4IMzBNuw6iKjkCpj+Av+AdnEEmD3bxfhzvuDk30HaEaLsEkXCO53rN+Bwg5qsvTuj/TjGYtx9nINhRmEx7AYWiFW7AXOuEcbPOUvIZ2mnrl+PkQUbNEh4QHNKUSDdsSBWEOlmxTEfvs26FL9Khe211if6Acgee+xo7xzMgBxfq9qPe3fgWBGN2lEnqtG9nExM7CV3jp3bDos2bKJB0nHFRxAxRpA/5CIXyHh5ABv6GZqd9dJ6iz2SjbxMMypGhJFtTlNzu3kK7xgDxpove8U66FK2A+s6nul5gVVMEL+Ak7lG/T+g9JcIOGar2CRUoogxMwpP/bLTJMB9bRhDbkk5bBUU0y3ES0xS04CBfN9RSHiY90vJK0BHaSzG9h2eejS3RJeVfdtrGzuGyd8CX7Yq6ExuCH63jaVMPkFOv6OibB6DKs2+VEQp+WYBoqERn2sVWWRNN0YurIfeL14U6YkpkLYCSG6e0yqdCxvKBLIm5FgAEAV0nKuwMYRUsAAAAASUVORK5CYII="}}